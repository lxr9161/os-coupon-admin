{"version":3,"sources":["webpack:///./src/components/UploadQiniu.vue?57f3","webpack:///src/components/UploadQiniu.vue","webpack:///./src/components/UploadQiniu.vue?061d","webpack:///./src/components/UploadQiniu.vue","webpack:///./src/config/app.js","webpack:///./src/components/UploadQiniu.vue?dee7","webpack:///./src/view/coupon/list.vue?09c6","webpack:///src/view/coupon/list.vue","webpack:///./src/view/coupon/list.vue?3a04","webpack:///./src/view/coupon/list.vue"],"names":["render","_vm","this","_h","$createElement","_c","_self","ref","attrs","action","acceptTypes","join","beforeUpload","onProgress","onSuccess","onError","headers","uploadData","_v","staticClass","slot","img","_e","staticRenderFns","props","data","host","loading","token","mounted","file","getUploadToken","watch","val","methods","$http","get","then","res","status","generateFileName","randomNumber","Date","parse","ext","str","parseInt","Math","random","getExt","result","exec","fileName","key","name","console","log","response","$emit","$message","$refs","upload","clearFiles","component","qiniuHost","qiniuUploadHost","on","$event","dialogVisible","directives","rawName","value","expression","staticStyle","tableData","scopedSlots","_u","fn","scope","row","icon","_s","_f","created_at","updated_at","edit","currentPage","pageSize","total","getList","form","id","init","model","callback","$$v","$set","cover","save","price","sort","share_btn","index_show","jump_get_page","link","appid","share_text","sub_title","components","UploadQiniu","config","saveLoading","JSON","stringify","initForm","created","request","put","post","info","del","delete"],"mappings":"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","file":"js/chunk-59f7d824.fcabfe63.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('el-upload',{ref:\"upload\",attrs:{\"action\":_vm.action,\"accept\":_vm.acceptTypes.join(','),\"limit\":1,\"before-upload\":_vm.beforeUpload,\"on-progress\":_vm.onProgress,\"on-success\":_vm.onSuccess,\"on-error\":_vm.onError,\"headers\":_vm.headers,\"data\":_vm.uploadData,\"name\":\"file\",\"show-file-list\":false}},[_c('el-button',{attrs:{\"size\":\"small\",\"type\":\"primary\"}},[_vm._v(\"点击上传\")]),_c('div',{staticClass:\"el-upload__tip nl-upload_tip\",attrs:{\"slot\":\"tip\"},slot:\"tip\"},[_vm._v(\"只能上传jpg/png文件，且不超过3mb\")])],1),_c('div',{staticClass:\"nl_upload-img\"},[(_vm.img)?_c('img',{staticClass:\"nl_upload-img\",attrs:{\"src\":_vm.img}}):_vm._e()])],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div>\n    <el-upload\n      ref=\"upload\"\n      :action=\"action\"\n      :accept=\"acceptTypes.join(',')\"\n      :limit=\"1\"\n      :before-upload=\"beforeUpload\"\n      :on-progress=\"onProgress\"\n      :on-success=\"onSuccess\"\n      :on-error=\"onError\"\n      :headers=\"headers\"\n      :data=\"uploadData\"\n      name=\"file\"\n      :show-file-list=\"false\"\n      >\n      <el-button size=\"small\" type=\"primary\">点击上传</el-button>\n      <div slot=\"tip\" class=\"el-upload__tip nl-upload_tip\">只能上传jpg/png文件，且不超过3mb</div>\n    </el-upload>\n    <div class=\"nl_upload-img\">\n      <img v-if=\"img\" :src=\"img\" class=\"nl_upload-img\"/>\n    </div>\n  </div>\n</template>\n\n<script>\nimport Cookies from 'js-cookie'\nimport { qiniuHost, qiniuUploadHost } from '@/config/app'\nexport default {\n  props: ['file'],\n  data () {\n    return {\n      headers: {\n        'Authorization': 'bearer ' + Cookies.get('auth_token')\n      },\n      acceptTypes: ['image/png', 'image/jpeg'],\n      action: qiniuUploadHost,\n      img: '',\n      host: qiniuHost,\n      loading: false,\n      uploadData: {\n        token: '',\n\t\t\t\tkey: '',\n      }\n    }\n  },\n  mounted () {\n    if (this.file) {\n      this.img = this.host + this.file\n    }\n    this.getUploadToken()\n  },\n  watch: {\n    'file' (val) {\n      if (val) {\n        this.img = this.host + val\n      } else {\n        this.img = val\n      }\n    }\n  },\n  methods: {\n    getUploadToken () {\n      this.$http.get('/backend/getQiniuUploadToken').then(res => {\n        if (res.data.status === 'success') {\n          this.uploadData.token = res.data.info.token\n        }\n      })\n    },\n    generateFileName (file) {\n      let ext = this.getExt(file)\n      return 'images/' + this.randomNumber(1) + Date.parse(new Date()) + this.randomNumber(4) + ext\n    },\n    randomNumber (len) {\n      let str = ''\n      for (let i = 1; i <= len; i++) {\n        str += parseInt(Math.random() * 10)\n      }\n      return str\n    },\n    getExt (fileName) {\n      var result = /\\.[^.]+/.exec(fileName)\n      return result\n    },\n    beforeUpload (file) {\n      if (this.loading) {\n        return false\n      }\n      if (!this.uploadData.token) {\n        return false\n      }\n      this.uploadData.key = this.generateFileName(file.name)\n      console.log(this.uploadData)\n      this.loading = true\n    },\n    onProgress () {},\n    onSuccess (response) {\n      if (response.key) {\n        this.$emit('update:file', response.key)\n        this.img = this.host + response.key\n      } else {\n        this.$message({ message: '上传图片失败', type: 'error'})\n      }\n      \n      this.loading = false\n      this.$refs.upload.clearFiles()\n    },\n    onError () {\n      this.loading = false\n      this.$refs.upload.clearFiles()\n      this.$message({ message: '上传图片失败', type: 'error' })\n    }\n  }\n}\n</script>\n\n<style>\n.nl_upload-img {\n  line-height: 1;\n  margin-top: 10px;\n}\n.nl_upload-img img {\n  display: block;\n  height: 100px;\n  width: auto;\n}\n.el-upload__tip.nl-upload_tip {\n  display: inline-block;\n  line-height: 24px;\n  margin-top: 0;\n  margin-left: 10px;\n  color: #909399;\n}\n</style>","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./UploadQiniu.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./UploadQiniu.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./UploadQiniu.vue?vue&type=template&id=2e83d7c6&\"\nimport script from \"./UploadQiniu.vue?vue&type=script&lang=js&\"\nexport * from \"./UploadQiniu.vue?vue&type=script&lang=js&\"\nimport style0 from \"./UploadQiniu.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","// 请求接口host\nlet host = process.env.VUE_APP_HOST\n\n\nexport const qiniuHost = 'http://statics.nulizhe.com/'\n\nexport const qiniuUploadHost = 'https://upload.qiniup.com'\n\nexport { host }\n\n\n","import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./UploadQiniu.vue?vue&type=style&index=0&lang=css&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./UploadQiniu.vue?vue&type=style&index=0&lang=css&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('div',{staticClass:\"pd-20\"},[_c('div',{staticClass:\"mb-10\"},[_c('el-button',{attrs:{\"type\":\"primary\",\"size\":\"small\"},on:{\"click\":function($event){_vm.dialogVisible = true}}},[_vm._v(\"添加优惠券\")])],1),_c('el-table',{directives:[{name:\"loading\",rawName:\"v-loading\",value:(_vm.loading),expression:\"loading\"}],staticStyle:{\"width\":\"100%\"},attrs:{\"border\":\"\",\"header-row-class-name\":\"yun-table-header\",\"data\":_vm.tableData}},[_c('el-table-column',{attrs:{\"prop\":\"id\",\"label\":\"ID\",\"width\":\"80\"}}),_c('el-table-column',{attrs:{\"prop\":\"name\",\"label\":\"优惠券名称\"}}),_c('el-table-column',{attrs:{\"label\":\"icon\",\"width\":\"120\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('img',{staticStyle:{\"width\":\"80px\"},attrs:{\"src\":_vm.host + scope.row.icon}})]}}])}),_c('el-table-column',{attrs:{\"label\":\"排序\",\"prop\":\"sort\",\"width\":\"100\"}}),_c('el-table-column',{attrs:{\"label\":\"状态\",\"width\":\"80\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [(scope.row.status === 0)?_c('span',{staticClass:\"yun-red\"},[_vm._v(\"禁用\")]):_vm._e(),(scope.row.status === 1)?_c('span',{staticClass:\"yun-green\"},[_vm._v(\"启用\")]):_vm._e()]}}])}),_c('el-table-column',{attrs:{\"prop\":\"created_at\",\"label\":\"时间\",\"width\":\"230\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('div',[_vm._v(\"创建时间: \"+_vm._s(_vm._f(\"date\")(scope.row.created_at,'T')))]),_c('div',[_vm._v(\"更新时间: \"+_vm._s(_vm._f(\"date\")(scope.row.updated_at,'T')))])]}}])}),_c('el-table-column',{attrs:{\"label\":\"操作\",\"width\":\"150px\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('el-button',{attrs:{\"type\":\"primary\",\"size\":\"small\"},on:{\"click\":function($event){return _vm.edit(scope.row)}}},[_vm._v(\"编辑\")])]}}])})],1),_c('el-pagination',{attrs:{\"background\":\"\",\"current-page\":_vm.currentPage,\"page-size\":_vm.pageSize,\"layout\":\"prev, pager, next, jumper\",\"total\":_vm.total,\"hide-on-single-page\":\"\"},on:{\"update:currentPage\":function($event){_vm.currentPage=$event},\"update:current-page\":function($event){_vm.currentPage=$event},\"current-change\":_vm.getList}}),_c('el-dialog',{attrs:{\"title\":this.form.id ? '编辑优惠券' : '添加优惠券',\"visible\":_vm.dialogVisible,\"width\":\"800px\"},on:{\"update:visible\":function($event){_vm.dialogVisible=$event},\"closed\":_vm.init}},[_c('el-form',{attrs:{\"model\":_vm.form,\"label-width\":\"140px\"}},[_c('el-form-item',{attrs:{\"label\":\"优惠券名称\",\"prop\":\"name\"}},[_c('el-input',{model:{value:(_vm.form.name),callback:function ($$v) {_vm.$set(_vm.form, \"name\", $$v)},expression:\"form.name\"}})],1),_c('el-form-item',{attrs:{\"label\":\"icon\"}},[_c('upload-qiniu',{attrs:{\"file\":_vm.form.icon},on:{\"update:file\":function($event){return _vm.$set(_vm.form, \"icon\", $event)}}})],1),_c('el-form-item',{attrs:{\"label\":\"优惠券封面\"}},[_c('upload-qiniu',{attrs:{\"file\":_vm.form.cover},on:{\"update:file\":function($event){return _vm.$set(_vm.form, \"cover\", $event)}}})],1),_c('el-form-item',{attrs:{\"label\":\"跳转地址\"}},[_c('el-input',{model:{value:(_vm.form.link),callback:function ($$v) {_vm.$set(_vm.form, \"link\", $$v)},expression:\"form.link\"}})],1),_c('el-form-item',{attrs:{\"label\":\"跳转小程序appid\"}},[_c('el-input',{model:{value:(_vm.form.appid),callback:function ($$v) {_vm.$set(_vm.form, \"appid\", $$v)},expression:\"form.appid\"}})],1),_c('el-form-item',{attrs:{\"label\":\"优惠价价值\"}},[_c('el-input',{model:{value:(_vm.form.price),callback:function ($$v) {_vm.$set(_vm.form, \"price\", $$v)},expression:\"form.price\"}})],1),_c('el-form-item',{attrs:{\"label\":\"子标题\"}},[_c('el-input',{model:{value:(_vm.form.sub_title),callback:function ($$v) {_vm.$set(_vm.form, \"sub_title\", $$v)},expression:\"form.sub_title\"}})],1),_c('el-form-item',{attrs:{\"label\":\"排序值\"}},[_c('el-input',{model:{value:(_vm.form.sort),callback:function ($$v) {_vm.$set(_vm.form, \"sort\", $$v)},expression:\"form.sort\"}})],1),_c('el-form-item',{attrs:{\"label\":\"分享按钮\"}},[_c('el-switch',{attrs:{\"inactive-value\":0,\"active-value\":1,\"active-text\":\"显示\",\"inactive-text\":\"隐藏\"},model:{value:(_vm.form.share_btn),callback:function ($$v) {_vm.$set(_vm.form, \"share_btn\", $$v)},expression:\"form.share_btn\"}})],1),_c('el-form-item',{attrs:{\"label\":\"分享页面文案\"}},[_c('el-input',{attrs:{\"type\":\"textarea\",\"rows\":\"5\"},model:{value:(_vm.form.share_text),callback:function ($$v) {_vm.$set(_vm.form, \"share_text\", $$v)},expression:\"form.share_text\"}})],1),_c('el-form-item',{attrs:{\"label\":\"是否首页展示\"}},[_c('el-switch',{attrs:{\"inactive-value\":0,\"active-value\":1,\"active-text\":\"是\",\"inactive-text\":\"否\"},model:{value:(_vm.form.index_show),callback:function ($$v) {_vm.$set(_vm.form, \"index_show\", $$v)},expression:\"form.index_show\"}})],1),_c('el-form-item',{attrs:{\"label\":\"是否跳转领取页面\"}},[_c('el-switch',{attrs:{\"inactive-value\":0,\"active-value\":1,\"active-text\":\"是\",\"inactive-text\":\"否\"},model:{value:(_vm.form.jump_get_page),callback:function ($$v) {_vm.$set(_vm.form, \"jump_get_page\", $$v)},expression:\"form.jump_get_page\"}})],1),_c('el-form-item',{attrs:{\"label\":\"状态\"}},[_c('el-radio',{attrs:{\"label\":1},model:{value:(_vm.form.status),callback:function ($$v) {_vm.$set(_vm.form, \"status\", $$v)},expression:\"form.status\"}},[_vm._v(\"启用\")]),_c('el-radio',{attrs:{\"label\":0},model:{value:(_vm.form.status),callback:function ($$v) {_vm.$set(_vm.form, \"status\", $$v)},expression:\"form.status\"}},[_vm._v(\"禁用\")])],1)],1),_c('span',{staticClass:\"dialog-footer\",attrs:{\"slot\":\"footer\"},slot:\"footer\"},[_c('el-button',{on:{\"click\":function($event){_vm.dialogVisible = false}}},[_vm._v(\"取 消\")]),_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.save}},[_vm._v(\"确 定\")])],1)],1)],1)])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div>\n    <div class=\"pd-20\">\n      <div class=\"mb-10\">\n        <el-button type=\"primary\" size=\"small\" @click=\"dialogVisible = true\">添加优惠券</el-button>\n      </div>\n      <el-table\n        border\n        header-row-class-name=\"yun-table-header\"\n        :data=\"tableData\"\n        style=\"width: 100%\"\n        v-loading=\"loading\">\n        <el-table-column prop=\"id\" label=\"ID\" width=\"80\"></el-table-column>\n        <el-table-column prop=\"name\" label=\"优惠券名称\"></el-table-column>\n        <el-table-column label=\"icon\" width=\"120\">\n          <template slot-scope=\"scope\">\n            <img :src=\"host + scope.row.icon\" style=\"width: 80px;\"/>\n          </template>\n        </el-table-column>\n        <el-table-column label=\"排序\" prop=\"sort\" width=\"100\"></el-table-column>\n        <el-table-column label=\"状态\" width=\"80\">\n          <template slot-scope=\"scope\">\n            <span class=\"yun-red\" v-if=\"scope.row.status === 0\">禁用</span>\n            <span class=\"yun-green\" v-if=\"scope.row.status === 1\">启用</span>\n          </template>\n        </el-table-column>\n        <el-table-column prop=\"created_at\" label=\"时间\" width=\"230\">\n          <template slot-scope=\"scope\">\n            <div>创建时间: {{ scope.row.created_at | date('T') }}</div>\n            <div>更新时间: {{ scope.row.updated_at | date('T') }}</div>\n          </template>\n        </el-table-column>\n        <el-table-column label=\"操作\" width=\"150px\">\n          <template slot-scope=\"scope\">\n            <el-button type=\"primary\" size=\"small\" @click=\"edit(scope.row)\">编辑</el-button>\n          </template>\n        </el-table-column>\n      </el-table>\n      <el-pagination\n        background\n        :current-page.sync=\"currentPage\"\n        :page-size=\"pageSize\"\n        layout=\"prev, pager, next, jumper\"\n        :total=\"total\"\n        @current-change=\"getList\"\n        hide-on-single-page>\n      </el-pagination>\n      <el-dialog\n        :title=\"this.form.id ? '编辑优惠券' : '添加优惠券'\"\n        :visible.sync=\"dialogVisible\"\n        width=\"800px\"\n        @closed=\"init\"\n        >\n        <el-form :model=\"form\" label-width=\"140px\">\n          <el-form-item label=\"优惠券名称\" prop=\"name\">\n            <el-input v-model=\"form.name\"></el-input>\n          </el-form-item>\n          <el-form-item label=\"icon\">\n            <upload-qiniu :file.sync=\"form.icon\"></upload-qiniu>\n          </el-form-item>\n          <el-form-item label=\"优惠券封面\">\n            <upload-qiniu :file.sync=\"form.cover\"></upload-qiniu>\n          </el-form-item>\n           <el-form-item label=\"跳转地址\">\n            <el-input v-model=\"form.link\"></el-input>\n          </el-form-item>\n          <el-form-item label=\"跳转小程序appid\">\n            <el-input v-model=\"form.appid\"></el-input>\n          </el-form-item>\n          <el-form-item label=\"优惠价价值\">\n            <el-input v-model=\"form.price\"></el-input>\n          </el-form-item>\n          <el-form-item label=\"子标题\">\n            <el-input v-model=\"form.sub_title\"></el-input>\n          </el-form-item>\n          <el-form-item label=\"排序值\">\n            <el-input v-model=\"form.sort\"></el-input>\n          </el-form-item>\n          <el-form-item label=\"分享按钮\">\n            <el-switch v-model=\"form.share_btn\" :inactive-value=\"0\" :active-value=\"1\" active-text=\"显示\" inactive-text=\"隐藏\"></el-switch>\n          </el-form-item>\n          <el-form-item label=\"分享页面文案\">\n            <el-input type=\"textarea\" v-model=\"form.share_text\" rows=\"5\"></el-input>\n          </el-form-item>\n          <el-form-item label=\"是否首页展示\">\n            <el-switch v-model=\"form.index_show\" :inactive-value=\"0\" :active-value=\"1\" active-text=\"是\" inactive-text=\"否\"></el-switch>\n          </el-form-item>\n          <el-form-item label=\"是否跳转领取页面\">\n            <el-switch v-model=\"form.jump_get_page\" :inactive-value=\"0\" :active-value=\"1\" active-text=\"是\" inactive-text=\"否\"></el-switch>\n          </el-form-item>\n          <el-form-item label=\"状态\">\n            <el-radio v-model=\"form.status\" :label=\"1\">启用</el-radio>\n            <el-radio v-model=\"form.status\" :label=\"0\">禁用</el-radio>\n          </el-form-item>\n        </el-form>\n        <span slot=\"footer\" class=\"dialog-footer\">\n          <el-button @click=\"dialogVisible = false\">取 消</el-button>\n          <el-button type=\"primary\" @click=\"save\">确 定</el-button>\n        </span>\n      </el-dialog>\n    </div>\n  </div>\n</template>\n\n<script>\n\nimport UploadQiniu from '@/components/UploadQiniu'\nimport { qiniuHost } from '@/config/app'\n\nconst initForm = {\n  name: '',\n  icon: '',\n  cover: '',\n  price: 0,\n  sort: 0,\n  share_btn: 0,\n  index_show: 0,\n  jump_get_page: 0,\n  status: 1,\n  link: '',\n  appid: '',\n  share_text: '',\n  sub_title: ''\n}\nexport default {\n  components: {\n    UploadQiniu\n  },\n  data () {\n    return {\n      host: qiniuHost,\n      loading: false,\n      tableData: [],\n      config: [],\n      currentPage: 1,\n      pageSize: 10,\n      total: 0,\n      dialogVisible: false,\n      saveLoading: false,\n      form: JSON.parse(JSON.stringify(initForm))\n    }\n  },\n  created () {\n    this.getList()\n  },\n  methods: {\n    getList () {\n      this.loading = true\n      this.$http.get(\n        '/backend/coupon',\n        {\n          params: {\n            page: this.currentPage\n          }\n        }).then(res => {\n        this.tableData = res.data.data\n        this.currentPage = res.data.current_page\n        this.total = res.data.total\n        this.pageSize = res.data.per_page\n        this.loading = false\n      }).catch(() => {\n        this.loading = false\n      })\n    },\n    save () {\n      if (this.saveLoading) {\n        return\n      }\n      this.saveLoading = true\n      let request = null\n      if (this.form.id) {\n        request = this.$http.put('backend/coupon/' + this.form.id, this.form)\n      } else {\n        request = this.$http.post('/backend/coupon', this.form)\n      }\n      request.then(res => {\n        if (res.data.status === 'success') {\n          this.$message({ message: res.data.info, type: 'success' })\n          this.getList()\n          this.init()\n          this.dialogVisible = false\n        }\n        this.saveLoading = false\n      }).catch(() => {\n        this.saveLoading = false\n      })\n    },\n    edit (row) {\n      this.saveLoading = true\n      this.dialogVisible = true\n      this.$http.get('/backend/coupon/' + row.id).then(res => {\n        this.saveLoading = false\n        if (res.data.info) {\n          this.form = res.data.info\n        } else {\n          this.dialogVisible = false\n          this.$message({ message: '未找到记录', type: 'error' })\n        }\n      }).catch(() => {\n        this.dialogVisible = false\n          this.$message({ message: '未找到记录', type: 'error' })\n      })\n    },\n    del (id) {\n      this.$http.delete('/backend/admin/' + id).then(res => {\n        if (res.data.status === 'success') {\n          this.$message({ message: res.data.info, type: 'success' })\n          this.getList()\n        }\n      })\n    },\n    init () {\n      this.form = JSON.parse(JSON.stringify(initForm))\n    }\n  }\n}\n</script>\n\n<style scoped>\n\n</style>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./list.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./list.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./list.vue?vue&type=template&id=799535e4&scoped=true&\"\nimport script from \"./list.vue?vue&type=script&lang=js&\"\nexport * from \"./list.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"799535e4\",\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}